/*Macle 24.6.0 jssdk v0.0.13  Fri Jun 28 2024*/
var e,t;const r=null===(t=null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)||void 0===t?void 0:t.toLocaleLowerCase(),n=-1!==(null==r?void 0:r.indexOf("android")),i=Symbol("currentRoute"),o=Symbol("isInitd"),a=Symbol("tabBar"),s=Symbol("canNavigateTo"),c="__ma__global__",l={[i]:"",[o]:!1,[a]:null,[s]:!0};function u(e,t){l[e]=t}function E(e){return window[c][e]}window[c]=l;const d={MiniProgram:{NAVIGATE_TO:"navigateTo",NAVIGATE_BACK:"navigateBack",REDIRECT_TO:"redirectTo",SWITCH_TAB:"switchTab",RE_LAUNCH:"reLaunch",POST_MESSAGE:"postMessage",CLOSE:"close"},Native:{CHOOSE_IMAGE:"chooseImage",GET_LOCAL_IMG_DATA:"getLocalImgData",GET_LOCATION:"getLocation",PREVIEW_IMAGE:"previewImage",OPEN_DOCUMENT:"openDocument",GET_STORAGE:"getStorage",SET_STORAGE:"setStorage",REMOVE_STORAGE:"removeStorage",CLEAR_STORAGE:"clearStorage",GET_NETWORK_TYPE:"getNetworkType",SCAN_CODE:"scanCode",GET_STATUS_BAR_HEIGHT:"getStatusBarHeight",CAPSULE_STYLE:"capsuleStyle",HIDE_LOADING:"hideLoading",SHOW_LOADING:"showLoading",SHOW_TOAST:"showToast",GET_SMALL_APP_INFO:"getsmallappinfo",GO_TO_BROWSER:"gotoBrowser",SAVE_FILE_TO_PHONE:"saveFileToPhone",SAVE_IMAGE:"saveImage",SAVE_BASE64_IMAGE:"saveBase64Image",CHOOSE_CONTACT:"chooseContact",IS_ONLINE:"isOnline",REQUEST:"request",UPLOAD_FILE:"uploadFile",DOWNLOAD_FILE:"downloadFile",REPORT_EVENT:"reportEvent",REPORT_PERFORMANCE:"reportPerformance",REPORT_LOG:"reportLog",SUBMIT_REPORT:"submitReport",PLAY_VOICE:"playVoice",PLAY_AUDIO:"playAudio",GET_BACKGROUND_FETCH_DATA:"getBackgroundFetchData",GET_LAUNCH_OPTIONS_SYNC:"getLaunchOptionsSync",GET_SYSTEM_INFO_SYNC:"getSystemInfoSync",NAVIGATE_TO_MINI_PROGRAM:"navigateToMiniProgram",EXIT_MINI_PROGRAM:"exitMiniProgram",STOP_AUOID:"stopVoice",GET_OPEN_USER_INFO:"getOpenUserInfo",GET_AUTH_CODE:"getAuthCode",OPEN_BLUETOOTH_ADAPTER:"openBluetoothAdapter",CLOSE_BLUETOOTH_ADAPTER:"closeBluetoothAdapter",START_BLUETOOTH_DEVICES_DISCOVERY:"startBluetoothDevicesDiscovery",STOP_BLUETOOTH_DEVICES_DISCOVERY:"stopBluetoothDevicesDiscovery",CREATE_BLE_CONNECTION:"createBLEConnection",CLOSE_BLE_CONNECTION:"closeBLEConnection",GET_BLE_DEVICE_SERVICES:"getBLEDeviceServices",GET_BLE_DEVICE_CHARACTERISTICS:"getBLEDeviceCharacteristics",READ_BLE_CHARACTERISTIC_VALUE:"readBLECharacteristicValue",WRITE_BLE_CHARACTERISTIC_VALUE:"writeBLECharacteristicValue",ON_BLUETOOTH_DEVICE_FOUND:"ON_BT_DEVICE_FOUND",OFF_BLUETOOTH_DEVICE_FOUND:"offBluetoothDeviceFound",TRADE_PAY:"tradePay"}},v=void 0!==window.parent.__simulatorConfig__;const f=new class{constructor(){this.eventMap=new Map,this.callbackMap=new Map}on(e,t){var r;const n=function(...e){try{t.apply(void 0,e)}catch(e){console.error(e)}};this.callbackMap.set(t,n),this.eventMap.has(e)?null===(r=this.eventMap.get(e))||void 0===r||r.add(n):this.eventMap.set(e,new Set([n]))}off(e,t){const r=this.eventMap.get(e);if(r)if(t){const e=this.callbackMap.get(t);r.delete(e)}else r.clear()}get(e){return this.eventMap.get(e)}emit(e,t){const r=this.eventMap.get(e);if(r)for(const e of r)e.call(this,t)}},_={};let O=0;const T={};function N(e,t={},r){const i=JSON.stringify(t),o=++O;_[o]=r,function(e,t,r){v?window.simulatorWebkit.messageHandlers.invoke.postMessage({command:e,inputParams:t,callbackId:r,type:"legacy"}):n?window.viewLayerNative.invoke(e,t,r):window.webkit.messageHandlers.invoke.postMessage({command:e,inputParams:t,callbackId:r})}(e,i,o)}function I(e,t){const r=JSON.stringify(Object.assign({command:e},t));return window.prompt(r)}function m(e,t,r={}){const n={};for(const e in t)"function"==typeof t[e]&&(n[e]=t[e],delete t[e]);N(e,t,((e,t)=>{var i,o,a,s,c,l,u,E,d,v,f;const _=0===Number(e),O=[1,-1].includes(Number(e));_?(null===(i=null==r?void 0:r.beforeAll)||void 0===i||i.call(r,t),null===(o=null==r?void 0:r.beforeSuccess)||void 0===o||o.call(r,t),null===(a=n.success)||void 0===a||a.call(n,t),null===(s=null==r?void 0:r.afterSuccess)||void 0===s||s.call(r,t)):O?(null===(c=null==r?void 0:r.beforeFail)||void 0===c||c.call(r,t),null===(l=n.fail)||void 0===l||l.call(n,t),null===(u=null==r?void 0:r.afterFail)||void 0===u||u.call(r,t)):(null===(E=null==r?void 0:r.beforeSuccess)||void 0===E||E.call(r,t),null===(d=null==n?void 0:n.preload)||void 0===d||d.call(n,t)),(_||O)&&(null===(v=n.complete)||void 0===v||v.call(n,t),null===(f=null==r?void 0:r.afterAll)||void 0===f||f.call(r,t))}))}function p(e,t={}){const r=JSON.stringify(t);v?window.simulatorWebkit.messageHandlers.notifyNative.postMessage({command:e,inputParams:r,type:"legacy"}):n?window.viewLayerNative.notifyNative(e,r):window.webkit.messageHandlers.notifyNative.postMessage({command:e,inputParams:r})}function A(e,t){T[e]=t}const S={invoke:N,invokeMethod:m,notifyNative:p,invokeSync:I,onNativeNotify:function(e,t,r){!function(e,t,r){"function"==typeof e&&e(r,t||r.webviewId||"")}(T[e],t,r)},onBasicEvent:A,offBasicEvent:function(e){T[e]=void 0}};window.logicLayer=S;const g={},b="ma_custom_event_";function C(e,t){g[`${b}${e}`]=t}function R(e,t={}){const r=JSON.stringify(t);h(`${b}${e}`,r)}function h(e,t){v?window.simulatorWebkit.messageHandlers.notifyNative.postMessage({eventName:e,paramsString:t,type:"legacy"}):n?window.viewLayerNative.notifyNative(e,t):window.webkit.messageHandlers.notifyNative.postMessage({eventName:e,paramsString:t})}const L={invoke:N,invokeSync:I,invokeMethod:m,beforeInvoke:function(e,t={},r={}){return t.success||t.fail||t.complete?m(e,t,r):new Promise(((n,i)=>{t.success=n,t.fail=i,m(e,t,r)}))},notifyNative:p,subscribe:C,webSubscribe:function(e,t){g[e]=t},publish:R,webPublish:function(e,t={}){h(e,JSON.stringify(t))},onBasicEvent:A};function P(){if(!E(o)){u(o,!0);try{L.onBasicEvent(d.Native.ON_BLUETOOTH_DEVICE_FOUND,(function(e){f.emit(d.Native.ON_BLUETOOTH_DEVICE_FOUND,e)})),C("getCurrentRoute",(e=>{u(i,e.route),u(a,e.tabBar),u(s,void 0===e.canNavigateTo||e.canNavigateTo)})),R("getCurrentRoute")}catch(e){}}}class y extends Error{constructor(e,t){if(super(`${e} fail, ${t}`),this.fileName="",this.lineNumber=1,this.columnNumber=-1,this.name=this.constructor.name,!this.stack)return;const[,r,n=1,i]=this.stack.match(/\/([\/\w-_\.]+\.js):(\d*):(\d*)/)||[];this.fileName=r,this.lineNumber=Number(n),this.columnNumber=Number(i)}}const D="MACLE_ERROR_LOG",U={normalError(e){console.error(null==e?void 0:e.message),p(D,{key:e.key||"MacleApiError",errorStack:e.message,apiName:e.apiName,keywords:e.keywords,fwkVersion:"",file:e.file,line:e.line,column:e.column,timestamp:Date.now()})}};function G(e,t,r=!0){let n,i,o=t;if(r&&(o=function(e){const t=e.split("?");return t[0]+=".html",void 0===t[1]?t[0]:`${t[0]}?${t[1]}`}(o)),o.startsWith("/"))return o.substr(1);if(o.startsWith("./"))return G(e,o.substr(2),!1);const a=o.split("/");for(n=0,i=a.length;n<i&&".."===a[n];n++);a.splice(0,n);const s=e.length>0?e.split("/"):[];return s.splice(s.length-n-1,n+1),s.concat(a).join("/")}function B(e){const t=e.split("?"),[r,n]=t;if(!n)return e;const i=n.split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){const r=t.split("="),n=r[0],i=r[1];e[n]=i}return e}),Object.create(null)),o=[];for(const e in i)o.push(e+"="+encodeURIComponent(i[e]));return o.length>0?r+"?"+o.join("&"):e}function M(e,t){const r=E(a);if(null===r)return!0;t.url.startsWith("/")&&(t.url=t.url.slice(1));const n=(i=t.url,null==r?void 0:r.list.find((e=>0===i.indexOf(e.pagePath))));var i;return e!==d.MiniProgram.NAVIGATE_TO&&e!==d.MiniProgram.REDIRECT_TO||!n?!(e===d.MiniProgram.SWITCH_TAB&&!n)||(H(e,`${e}: can not ${e} to a non-tabbar page`),!1):(H(e,`${e}: can not ${e} to a tabbar page`),!1)}function k(e){return/^(http|https):\/\/.*/i.test(e)}function w(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}function H(e,t){const r=new y(e,t);return U.normalError({message:r.message,file:r.fileName,line:r.lineNumber,column:r.columnNumber}),r}function V(e,t){if(F(e)&&W(t)&&Object.keys(t).length){const r=e.split("?")[0],n=e.split("?")[1],i={};n&&n.split("&").forEach((e=>{e.length&&(i[e.split("=")[0]]=e.split("=")[1])}));const o={};for(const[e,r]of Object.entries(t))W(r)?o[e]=JSON.stringify(r):o[e]=r;return`${r}?${function(e){if(!W(e))return e;const t=[];for(const r in e)try{t.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`)}catch(n){t.push(`${r}=${e[r]}`)}return t.join("&")}(function(e,t){for(const[r,n]of Object.entries(t))e[r]=n;return e}(i,o))}`}return e}function j(e){return"Array"===w(e)}function F(e){return"String"===w(e)}function W(e){return"Object"===w(e)}function $(e,t,r){var n;const i=H(e,r);if(!t.success&&!t.fail&&!t.complete)return new Promise(((e,r)=>{t.fail=r,t.fail({errMsg:i.message})}));for(const e of["fail","complete"]){null===(n=t[e])||void 0===n||n.call(t,{errMsg:i.message})}return null}function Y(e,t,r,n="parameter",i=!1){let o="";const a=w(t),s=w(r);if(a!==s)return o=`${n} should be ${s} instead of ${a};`,t.invalidParamObj=$(e,t,o),!1;if("Object"!==s)return!0;for(const[e,n]of Object.entries(r))if(Object.prototype.hasOwnProperty.call(t,e)||i){const r=w(n),i=w(t[e]);r!==i&&(o+=`${e} should be ${r} instead of ${i};`)}return!o||(t.invalidParamObj=$(e,t,o),!1)}function x(e,t,r,n={},i="parameter"){const o=function(e,t,r={}){var n;const i=Object.assign({},t);for(let o in t)void 0===e[o]&&(null===(n=r[o])||void 0===n?void 0:n.optional)&&(delete i[o],delete r[o]);return i}(t,r,n);return!!Y(e,t,o,i,!0)&&function(e,t,r,n={},i="parameter"){let o="";for(let e in n){const r=t[e],{nonempty:i}=n[e];if(i){const t=j(r)&&!r.length,n=F(r)&&!r.trim();(t||n)&&(o+=`parameter error: ${e} cannot be empty;`)}}if(o)return t.invalidParamObj=$(e,t,o),!1;return!0}(e,t,0,n,i)}function J(e,t,r){for(const[n,i]of Object.entries(e))if(!i||"string"==typeof i&&0===i.trim().length)return t.invalidParamObj=$(r,t,`parameter error: ${n} should be required instead of Undefined or empty.`),!1;return!0}var K=Object.freeze({__proto__:null,close:function(){L.invokeMethod(d.MiniProgram.CLOSE)},getEnv:function(e){e({miniprogram:"miniprogram"===window.__ma_environment})},navigateBack:function(e){const t=Object.assign({delta:1},e);L.beforeInvoke(d.MiniProgram.NAVIGATE_BACK,t)},navigateTo:function(e){if(!e.url)return $(d.MiniProgram.NAVIGATE_TO,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=G(E(i),t.url),t.url=B(t.url),M(d.MiniProgram.NAVIGATE_TO,t)&&L.beforeInvoke(d.MiniProgram.NAVIGATE_TO,t)},postMessage:function(e){L.beforeInvoke(d.MiniProgram.POST_MESSAGE,e)},reLaunch:function(e){if(!e.url)return $(d.MiniProgram.RE_LAUNCH,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=G(E(i),t.url),t.url=B(t.url),M(d.MiniProgram.RE_LAUNCH,t)&&L.beforeInvoke(d.MiniProgram.RE_LAUNCH,t)},redirectTo:function(e){if(!e.url)return $(d.MiniProgram.REDIRECT_TO,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=G(E(i),t.url),t.url=B(t.url),M(d.MiniProgram.REDIRECT_TO,t)&&L.beforeInvoke(d.MiniProgram.REDIRECT_TO,t)},switchTab:function(e){if(!e.url)return $(d.MiniProgram.SWITCH_TAB,e,"parameter error:parameter.url should be String instead of Undefined.");const t=e;t.url=G(E(i),t.url),t.url=B(t.url),M(d.MiniProgram.SWITCH_TAB,t)&&L.beforeInvoke(d.MiniProgram.SWITCH_TAB,t)}});function q(e,t={},r){r&&"function"==typeof r?L.invoke(e,t,((t,n)=>{0===Number(t)?r(n):H(e,`${n.errMsg}`)})):H(e,"callback should be function!")}const X={nonempty:!0};const Q={optional:!0};const z={nonempty:!0},Z={optional:!0};var ee=Object.freeze({__proto__:null,callNativeAPI:q,capsuleStyle:function(e){if(Y(d.Native.CAPSULE_STYLE,e,{style:0})){return-1===[0,1].indexOf(e.style)?$(d.Native.CAPSULE_STYLE,e,`parameter error: invalid style ${e.style}`):L.beforeInvoke(d.Native.CAPSULE_STYLE,e)}return e.invalidParamObj},chooseContact:function(e){return L.beforeInvoke(d.Native.CHOOSE_CONTACT,e)},chooseImage:function(e){const t=Object.assign({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e);return L.beforeInvoke(d.Native.CHOOSE_IMAGE,t)},clearStorage:function(e){return L.beforeInvoke(d.Native.CLEAR_STORAGE,e)},closeBLEConnection:function(e){return J({deviceId:e.deviceId},e,d.Native.CLOSE_BLE_CONNECTION)&&Y(d.Native.CLOSE_BLE_CONNECTION,e,{deviceId:""})?L.beforeInvoke(d.Native.CLOSE_BLE_CONNECTION,e):e.invalidParamObj},closeBluetoothAdapter:function(e){return L.beforeInvoke(d.Native.CLOSE_BLUETOOTH_ADAPTER,e)},createBLEConnection:function(e){if(!J({deviceId:e.deviceId},e,d.Native.CREATE_BLE_CONNECTION))return e.invalidParamObj;if(x(d.Native.CREATE_BLE_CONNECTION,e,{deviceId:"",timeout:0},{timeout:{optional:!0}})){const t=Object.assign({timeout:3e4},e);return L.beforeInvoke(d.Native.CREATE_BLE_CONNECTION,t)}return e.invalidParamObj},downloadFile:function(e){return e.url?k(e.url)?L.beforeInvoke(d.Native.DOWNLOAD_FILE,e):$(d.Native.DOWNLOAD_FILE,e,`parameter error: invalid url ${e.url}`):$(d.Native.DOWNLOAD_FILE,e,"parameter error: parameter.url should be String instead of Undefined.")},exitMiniProgram:function(e){return x(d.Native.EXIT_MINI_PROGRAM,e,{clearCache:!1},{clearCache:Q})?L.beforeInvoke(d.Native.EXIT_MINI_PROGRAM,e):e.invalidParamObj},getAuthCode:function(e){if(!e.scopes)return $(d.Native.GET_AUTH_CODE,e,"parameter error:parameter.scopes should be Array<string> instead of Undefined.");if(Y(d.Native.GET_AUTH_CODE,e,{scopes:["1"]})){const t=function(e){const t=["AUTH_BASE","AUTH_USER","SEND_MESSAGE","USER_NICKNAME","USER_NAME","USER_LOGIN_ID","PLAINTEXT_USER_LOGIN_ID","HASH_LOGIN_ID","USER_AVATAR","USER_GENDER","USER_BIRTHDAY","USER_NATIONALITY","USER_CONTACTINFO","USER_ADDRESS","PLAINTEXT_MOBILE_PHONE"];return e.filter((e=>-1===t.indexOf(`${e}`.toUpperCase())))}(e.scopes);return t.length>0?$(d.Native.GET_AUTH_CODE,e,`parameter error: invalid scopes ${t}`):L.beforeInvoke(d.Native.GET_AUTH_CODE,e)}return e.invalidParamObj},getBLEDeviceCharacteristics:function(e){return J({deviceId:e.deviceId,serviceId:e.serviceId},e,d.Native.GET_BLE_DEVICE_CHARACTERISTICS)&&Y(d.Native.GET_BLE_DEVICE_CHARACTERISTICS,e,{deviceId:"",serviceId:""})?L.beforeInvoke(d.Native.GET_BLE_DEVICE_CHARACTERISTICS,e):e.invalidParamObj},getBLEDeviceServices:function(e){return J({deviceId:e.deviceId},e,d.Native.GET_BLE_DEVICE_SERVICES)&&Y(d.Native.GET_BLE_DEVICE_SERVICES,e,{deviceId:""})?L.beforeInvoke(d.Native.GET_BLE_DEVICE_SERVICES,e):e.invalidParamObj},getBackgroundFetchData:function(e){return e.fetchType?L.beforeInvoke(d.Native.GET_BACKGROUND_FETCH_DATA,e):$(d.Native.GET_BACKGROUND_FETCH_DATA,e,"parameter error:parameter.fetchType should be string instead of Undefined.")},getLaunchOptionsSync:function(){const e=L.invokeSync(d.Native.GET_LAUNCH_OPTIONS_SYNC);return e&&JSON.parse(e)},getLocalImgData:function(e){return(null==e?void 0:e.path)?L.beforeInvoke(d.Native.GET_LOCAL_IMG_DATA,e):$(d.Native.GET_LOCAL_IMG_DATA,e,"parameter error:parameter.path should be String instead of Undefined.")},getLocation:function(e){const t=Object.assign({useFetchData:!1},e);return L.beforeInvoke(d.Native.GET_LOCATION,t)},getNetworkType:function(e){return L.beforeInvoke(d.Native.GET_NETWORK_TYPE,e)},getOpenUserInfo:function(e){return L.beforeInvoke(d.Native.GET_OPEN_USER_INFO,e)},getStatusBarHeight:function(e){return L.beforeInvoke(d.Native.GET_STATUS_BAR_HEIGHT,e)},getStorage:function(e){if(!(null==e?void 0:e.key))return $(d.Native.GET_STORAGE,e,"parameter error:parameters.key should be String instead of Undefined.");const t=Object.assign({encrypt:!1},e);return L.beforeInvoke(d.Native.GET_STORAGE,t)},getSystemInfoSync:function(){const e=L.invokeSync(d.Native.GET_SYSTEM_INFO_SYNC);return e&&JSON.parse(e)},getsmallappinfo:function(e){return L.beforeInvoke(d.Native.GET_SMALL_APP_INFO,e)},gotoBrowser:function(e){return e.openUrl?Y(d.Native.GO_TO_BROWSER,e,{openUrl:""})?L.beforeInvoke(d.Native.GO_TO_BROWSER,e):e.invalidParamObj:$(d.Native.GO_TO_BROWSER,e,"parameter error:parameter.openUrl should be String instead of Undefined.")},hideLoading:function(e){return L.beforeInvoke(d.Native.HIDE_LOADING,e)},isOnline:function(){return window.navigator.onLine},native:function(e,t){const r=t||{};return new Promise(((t,n)=>{q(e,r,(e=>{t(e)}))}))},navigateToMiniProgram:function(e){return e.appId?Y(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,{appId:"",path:"",params:""})?!e.path&&e.params?$(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,"parameter error: there is params but no path."):L.beforeInvoke(d.Native.NAVIGATE_TO_MINI_PROGRAM,e):e.invalidParamObj:$(d.Native.NAVIGATE_TO_MINI_PROGRAM,e,"parameter error:parameter.appId should be String instead of Undefined.")},offBluetoothDeviceFound:function(){f.off(d.Native.ON_BLUETOOTH_DEVICE_FOUND)},onBluetoothDeviceFound:function(e){"Function"===w(e)?f.on(d.Native.ON_BLUETOOTH_DEVICE_FOUND,e):H("onBluetoothDeviceFound","callback is not a function")},openBluetoothAdapter:function(e){return L.beforeInvoke(d.Native.OPEN_BLUETOOTH_ADAPTER,e)},openDocument:function(e){return(null==e?void 0:e.filePath)?e.fileType&&-1===["doc","docx","xls","xlsx","ppt","pptx","pdf"].indexOf(e.fileType)?$(d.Native.OPEN_DOCUMENT,e,"parameter error:parameter.fileType is invalid value."):L.beforeInvoke(d.Native.OPEN_DOCUMENT,e):$(d.Native.OPEN_DOCUMENT,e,"parameter error:parameters.filePath should be String instead of Undefined.")},playAudio:function(e){return e.url?k(e.url)?L.beforeInvoke(d.Native.PLAY_VOICE,e):$(d.Native.PLAY_AUDIO,e,`parameter error: invalid url ${e.url}`):$(d.Native.PLAY_AUDIO,e,"parameter error:parameter.url should be String instead of Undefined.")},previewImage:function(e){return(null==e?void 0:e.urls)?L.beforeInvoke(d.Native.PREVIEW_IMAGE,e):$(d.Native.PREVIEW_IMAGE,e,"parameter error:parameter.urls should be Array instead of Undefined.")},readBLECharacteristicValue:function(e){return J({deviceId:e.deviceId,serviceId:e.serviceId,characteristicId:e.characteristicId},e,d.Native.READ_BLE_CHARACTERISTIC_VALUE)&&Y(d.Native.READ_BLE_CHARACTERISTIC_VALUE,e,{deviceId:"",serviceId:"",characteristicId:""})?L.beforeInvoke(d.Native.READ_BLE_CHARACTERISTIC_VALUE,e):e.invalidParamObj},removeStorage:function(e){return(null==e?void 0:e.key)?L.beforeInvoke(d.Native.REMOVE_STORAGE,e):$(d.Native.REMOVE_STORAGE,e,"parameter error:parameter.key should be String instead of Undefined.")},reportEvent:function(e){return x(d.Native.REPORT_EVENT,e,{eventId:""},{eventId:X})?L.notifyNative(d.Native.REPORT_EVENT,e):e.invalidParamObj},reportLog:function(e){if(!e.log||!W(e.log)&&!F(e.log))return $(d.Native.REPORT_LOG,e,"parameter error:  parameter.log should be Object or String instead of Undefined.");if(e.level&&-1===["debug","info","error"].indexOf(e.level))return $(d.Native.REPORT_LOG,e,`parameter error:  invalid level ${e.level}`);W(e.log)&&(e.log=JSON.stringify(e.log));const t=Object.assign({level:"info"},e);return L.notifyNative(d.Native.REPORT_LOG,t)},reportPerformance:function(e){return e.reportEvent&&F(e.reportEvent)?e.reportParams&&W(e.reportParams)?L.notifyNative(d.Native.REPORT_PERFORMANCE,e):$(d.Native.REPORT_PERFORMANCE,e,"parameter error:  parameter.reportParams should be Object instead of Undefined."):$(d.Native.REPORT_PERFORMANCE,e,"parameter error:  parameter.reportEvent should be String instead of Undefined.")},request:function(e){const t=function(e){let t="";e.url||(t="parameter error: parameter.url should be String instead of Undefined.");k(e.url)||(t=`parameter error: invalid url ${e.url}`);e.data&&"Function"===w(e.data)&&(t="parameter error: data should not be Function.");return t}(e);if(t)return $(d.Native.REQUEST,e,t);e.header&&!W(e.header)&&(e.header={}),e.header=function(e){const t={};for(const r in e)switch(w(e[r])){case"String":t[r]=e[r];break;case"Number":case"Boolean":t[r]=`${e[r]}`;break;default:t[r]=JSON.stringify(e[r])}return t}(e.header||{});for(const t in e.header)if("content-type"===t.toLowerCase()){const r=e.header[t];delete e.header[t],e.header[t.toLowerCase()]=r}e.method=e.method?e.method.toUpperCase():"GET",e.dataType=e.dataType||"json",e.header["content-type"]=e.header["content-type"]||"application/json";let r="";e.data&&(r=W(e.data)?JSON.stringify(e.data):e.data),"GET"===e.method&&(e.url=V(e.url,e.data||{}));const n=Object.assign({data:r},e);return L.beforeInvoke(d.Native.REQUEST,n,{beforeSuccess(t){if("json"===e.dataType)try{t.data&&F(t.data)&&(t.data=JSON.parse(t.data))}catch(t){H(d.Native.REQUEST,`JSON parse data error from ${e.url}`)}}})},saveBase64Image:function(e){return e.base64?Y(d.Native.SAVE_BASE64_IMAGE,e,{base64:""})?L.beforeInvoke(d.Native.SAVE_BASE64_IMAGE,e):e.invalidParamObj:$(d.Native.SAVE_BASE64_IMAGE,e,"parameter error:parameter.base64 should be String instead of Undefined.")},saveFileToPhone:function(e){return e.content?e.fileName?Y(d.Native.SAVE_FILE_TO_PHONE,e,{content:"",fileName:""})?L.beforeInvoke(d.Native.SAVE_FILE_TO_PHONE,e):e.invalidParamObj:$(d.Native.SAVE_FILE_TO_PHONE,e,"parameter error:parameter.fileName should be String instead of Undefined."):$(d.Native.SAVE_FILE_TO_PHONE,e,"parameter error:parameter.content should be String instead of Undefined.")},saveImage:function(e){return e.content?Y(d.Native.SAVE_IMAGE,e,{content:""})?L.beforeInvoke(d.Native.SAVE_IMAGE,e):e.invalidParamObj:$(d.Native.SAVE_IMAGE,e,"parameter error:parameter.content should be String instead of Undefined.")},scanCode:function(e){const t=["barCode","qrCode","datamatrix","pdf417"];if((null==e?void 0:e.scanType)&&e.scanType.length>0&&!e.scanType.every((e=>t.indexOf(e)>-1)))return $(d.Native.SCAN_CODE,e,"parameter error:parameter.scanType contains invalid values.");const r=Object.assign({onlyFromCamera:!1,scanType:["barCode","qrCode"]},e);return L.beforeInvoke(d.Native.SCAN_CODE,r)},setStorage:function(e){if(!(null==e?void 0:e.key)||!e.data)return $(d.Native.SET_STORAGE,e,"parameter error:parameter.key or parameter.data should not be Undefined.");const t=Object.assign({encrypt:!1},e);return L.beforeInvoke(d.Native.SET_STORAGE,t)},showLoading:function(e){const t=Object.assign({title:"Loading...",mask:!1},e);return Y(d.Native.SHOW_LOADING,t,{title:"",mask:!1})?L.beforeInvoke(d.Native.SHOW_LOADING,t):t.invalidParamObj},showToast:function(e){var t;if(!(null==e?void 0:e.title)&&!(null==e?void 0:e.message))return $(d.Native.SHOW_TOAST,e,"parameter error: prompt message should be String instead of Undefined.");if(e.title=null!==(t=e.title)&&void 0!==t?t:e.message,Y(d.Native.SHOW_TOAST,e,{title:"",message:"",icon:"",duration:0,mask:!1,image:""})){const t=["success","error","loading","none"];if((null==e?void 0:e.icon)&&-1===t.indexOf(null==e?void 0:e.icon))return $(d.Native.SHOW_TOAST,e,"parameter error:parameter.icon contains invalid values.");const r=Object.assign({icon:"success",duration:1500,mask:!1},e);return L.beforeInvoke(d.Native.SHOW_TOAST,r)}return e.invalidParamObj},startBluetoothDevicesDiscovery:function(e){return x(d.Native.START_BLUETOOTH_DEVICES_DISCOVERY,e,{services:["1"]},{services:{optional:!0}})?L.beforeInvoke(d.Native.START_BLUETOOTH_DEVICES_DISCOVERY,e):e.invalidParamObj},stopAudio:function(e){return L.beforeInvoke(d.Native.STOP_AUOID,e)},stopBluetoothDevicesDiscovery:function(e){return L.beforeInvoke(d.Native.STOP_BLUETOOTH_DEVICES_DISCOVERY,e)},submitReport:function(e){return L.beforeInvoke(d.Native.SUBMIT_REPORT,e)},tradePay:function(e){return x(d.Native.TRADE_PAY,e,{tradeNO:"",orderStr:"",sign:"",extendParam:""},{tradeNO:z,orderStr:z,sign:z,extendParam:Z})?L.beforeInvoke(d.Native.TRADE_PAY,e):e.invalidParamObj},uploadFile:function(e){if(!e.url)return $(d.Native.UPLOAD_FILE,e,"parameter error: parameter.url should be String instead of Undefined.");if(e.files)e.filePath="",e.name="";else{if(!e.filePath)return $(d.Native.UPLOAD_FILE,e,"parameter error: parameter.filePath should be String instead of Undefined.");if(!e.name)return $(d.Native.UPLOAD_FILE,e,"parameter error: parameter.name should be String instead of Undefined.")}return L.beforeInvoke(d.Native.UPLOAD_FILE,e)},writeBLECharacteristicValue:function(e){const{deviceId:t,serviceId:r,characteristicId:n,value:i,writeType:o}=e,a={deviceId:t,serviceId:r,characteristicId:n,value:i};if(void 0!==o&&(a.writeType=o),!J(a,e,d.Native.WRITE_BLE_CHARACTERISTIC_VALUE))return e.invalidParamObj;if(Y(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,e,{deviceId:"",serviceId:"",characteristicId:"",value:new ArrayBuffer(8),writeType:""})){const t=["write","writeNoResponse","signedWrite"];if((null==e?void 0:e.writeType)&&-1===t.indexOf(null==e?void 0:e.writeType))return $(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,e,"parameter error:parameter.writeType contains invalid values.");const r=(s=e.value,Array.from(new Uint8Array(s))),n=Object.assign(Object.assign({},e),{value:r});return L.beforeInvoke(d.Native.WRITE_BLE_CHARACTERISTIC_VALUE,n)}var s;return e.invalidParamObj}});const te=Object.assign({miniProgram:Object.assign(Object.assign({},K),{navigateBackMiniProgram(){},onWebviewEvent(){},offWebviewEvent(){},sendWebviewEvent(){},onShow(){},onHide(){},onUnload(){}})},ee);"loading"!==document.readyState?P():document.addEventListener("DOMContentLoaded",P),window.onerror=function(e,t,r,n,i){U.normalError({key:"thirdPageParamsError",message:e,file:t,line:r,column:n})},window.ma=te,window.viewLayer={onInvokeFinished:function(e,t,r){const n=_[e];"function"==typeof n&&n(t,r),2!==Number(t)&&delete _[e]},subscribeHandler:function(e,t){return(0,g[e])(t)}};export{te as default};
//# sourceMappingURL=js-sdk.esm.min.js.map
